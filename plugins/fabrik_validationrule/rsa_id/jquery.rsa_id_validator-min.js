/*! Fabrik */
!function(a){a.fn.rsa_id_validator=function(b){var c={displayValid:[!0,"<font color='#00CC00'>IDNo Valid</font>","<font color='#FF0000'>IDNo InValid</font>"],displayDate:[!0,"<b>Date of Birth:</b> "],displayAge:[!0,"<b>Age:</b> "],displayGender:[!0,"<b>Gender:</b> Male","<b>Gender:</b> Female"],displayCitizenship:[!0,"<b>Citizenship:</b> South African","<b>Citizenship:</b> Foreign Citizenship"],displayValid_id:"id_results",displayDate_id:"id_results",displayAge_id:"id_results",displayGender_id:"id_results",displayCitizenship_id:"id_results"},b=a.extend(c,b);return this.each(function(){function c(a){var b=1,c=[],d=[],e=new Date;if(13==a.length){var f=a.substr(0,2),g=a.substr(2,2),h=a.substr(4,2),i=1*a.substr(6,4),j=1*a.substr(10,2),k=1*a.substr(12,1),l=e.getFullYear()+"";if(l=l.substr(2,2),f=l>=f?"20"+f:"19"+f,f>1900&&f<e.getFullYear()||(b=0,c[c.length]=1,d[d.length]="Year is not valid, "),g>0&&13>g||(b=0,c[c.length]=2,d[d.length]="Month is not valid, "),h>0&&32>h||(b=0,c[c.length]=3,d[d.length]="Day is not valid, "),4!=g&&6!=g&&9!=g&&11!=g||31!=h||(b=0,c[c.length]=4,d[d.length]="Date not valid. This month does not have 31 days, "),2==g){var m=f%4==0&&(f%100!=0||f%400==0);(h>29||29==h&&!m)&&(b=0,c[c.length]=5,d[d.length]="Date not valid. February does not have "+h+" days for year "+f+", ")}i>=0&&1e4>i||(b=0,c[c.length]=6,d[d.length]="Gender is not valid, "),8==j||9==j||18==j||19==j||(b=0,c[c.length]=7,d[d.length]="Citizen value is not valid, ");var n=0,o=0,p="",q=0,r=0;for(r=0;11>r;r+=2)n+=1*a.substr(r,1);for(r=0;12>r;r+=2)p=p+a.substr(r+1,1)+"";for(p=2*p,p+="",r=0;r<p.length;r++)o+=1*p.substr(r,1);q=1*n+1*o,q+="xxx",q=10-1*q.substr(1,1),10==q&&(q=0),q==k||(b=0,c[c.length]=8,d[d.length]="Checksum is not valid, ")}else b=0,c[c.length]=0,d[d.length]="IDNo is not the right length, ";var s=[b,c,d];return s}obj=a(this),a(obj).attr("maxlength","13"),a(obj).keydown(function(a){46==a.keyCode||8==a.keyCode||9==a.keyCode||27==a.keyCode||13==a.keyCode||65==a.keyCode&&a.ctrlKey===!0||a.keyCode>=35&&a.keyCode<=39||(a.shiftKey||(a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))&&a.preventDefault()}),a(obj).bind("keyup",function(){var d=[[],[],[],[],[]],e=new Date,f=a(this).val();if(1==b.displayDate[0]&&f.length>5){var g="",h=f.substr(0,2),i=e.getFullYear()+"";i=i.substr(2,2),g=i>=h?"20"+h+"-"+f.substr(2,2)+"-"+f.substr(4,2):"19"+h+"-"+f.substr(2,2)+"-"+f.substr(4,2),d[1].push(b.displayDate[1]+g)}if(1==b.displayAge[0]&&f.length>5){var h=f.substr(0,2),i=e.getFullYear()+"";i=i.substr(2,2),h=i>=h?"20"+h:"19"+h;var j=new Date(h),k=e.getFullYear()-j.getFullYear(),l=e.getMonth()-j.getMonth();(0>l||0===l&&e.getDate()<j.getDate())&&k--,d[2].push(b.displayAge[1]+k)}if(1==b.displayGender[0]&&f.length>9){var m=f.substr(6,4);m=1*m+0,m>=0&5e3>m&&d[3].push(b.displayGender[2]),m>4999&1e4>m&&d[3].push(b.displayGender[1])}if(1==b.displayCitizenship[0]&&f.length>12){var n=1*f.substr(10,2);8==n||9==n?d[4].push(b.displayCitizenship[1]):(18==n||19>n)&&d[4].push(b.displayCitizenship[2])}if(1==b.displayValid[0]&&13==f.length){var o=c(f);if(1!=o[0])return void b.onFailure(o);d[0].push(b.displayValid[1]),b.onSuccess(o,d)}})})}}(jQuery);